{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file://A%3A/IIST%20GEO%20INFORMATICS/2nd%20SEMESTER/IEEE%20GRSS/PS-4/proj1/frontend/components/WindHumidityMap.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { MapContainer, TileLayer, CircleMarker, Popup } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst WindHumidityMap = () => {\r\n  const [sensorData, setSensorData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const ws = new WebSocket(\"ws://localhost:8000\");\r\n\r\n    ws.onmessage = (event) => {\r\n      try {\r\n        const newData = JSON.parse(event.data);\r\n\r\n        const lat = parseFloat(newData.lat);\r\n        const lon = parseFloat(newData.lon);\r\n        const humidity = parseFloat(newData.humidity);\r\n        const wind = parseFloat(newData.wind);\r\n        const pm25 = parseFloat(newData.pm25);\r\n        const temp = parseFloat(newData.temp);\r\n\r\n        if (isNaN(lat) || isNaN(lon)) return;\r\n\r\n        setSensorData((prev) => [\r\n          ...prev.slice(-50), // Keep last 50 data points for animation\r\n          { lat, lon, humidity, wind, pm25, temp },\r\n        ]);\r\n      } catch (error) {\r\n        console.error(\"Error parsing WebSocket data:\", error);\r\n      }\r\n    };\r\n\r\n    return () => ws.close();\r\n  }, []);\r\n\r\n  return (\r\n    <MapContainer\r\n      center={[20.5937, 78.9629]} // Default to India\r\n      zoom={5}\r\n      style={{ height: \"100vh\", width: \"100%\" }}\r\n    >\r\n      <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n\r\n      {sensorData.map((data, index) => (\r\n        <motion.div\r\n          key={index}\r\n          animate={{ opacity: [0, 1, 0], scale: [0.5, 1, 0.5] }} // Pulse effect\r\n          transition={{ duration: 2, repeat: Infinity }}\r\n        >\r\n          {/* Wind Layer (Blue) */}\r\n          <CircleMarker\r\n            center={[data.lat, data.lon]}\r\n            radius={data.wind * 0.5}\r\n            color=\"blue\"\r\n            fillOpacity={0.6}\r\n          >\r\n            <Popup>üí® Wind: {data.wind} km/h</Popup>\r\n          </CircleMarker>\r\n\r\n          {/* Humidity Layer (Green) */}\r\n          <CircleMarker\r\n            center={[data.lat, data.lon]}\r\n            radius={data.humidity * 0.3}\r\n            color=\"green\"\r\n            fillOpacity={0.5}\r\n          >\r\n            <Popup>üíß Humidity: {data.humidity}%</Popup>\r\n          </CircleMarker>\r\n\r\n          {/* PM 2.5 Layer (Red) */}\r\n          <CircleMarker\r\n            center={[data.lat, data.lon]}\r\n            radius={data.pm25 * 0.2}\r\n            color=\"red\"\r\n            fillOpacity={0.4}\r\n          >\r\n            <Popup>üå´Ô∏è PM 2.5: {data.pm25}</Popup>\r\n          </CircleMarker>\r\n\r\n          {/* Temperature Layer (Orange) */}\r\n          <CircleMarker\r\n            center={[data.lat, data.lon]}\r\n            radius={data.temp * 0.2}\r\n            color=\"orange\"\r\n            fillOpacity={0.5}\r\n          >\r\n            <Popup>üå°Ô∏è Temp: {data.temp}¬∞C</Popup>\r\n          </CircleMarker>\r\n        </motion.div>\r\n      ))}\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default WindHumidityMap;\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;;;;;;;;;;;AAEA,MAAM,kBAAkB;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAE/C,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,KAAK,IAAI,UAAU;QAEzB,GAAG,SAAS,GAAG,CAAC;YACd,IAAI;gBACF,MAAM,UAAU,KAAK,KAAK,CAAC,MAAM,IAAI;gBAErC,MAAM,MAAM,WAAW,QAAQ,GAAG;gBAClC,MAAM,MAAM,WAAW,QAAQ,GAAG;gBAClC,MAAM,WAAW,WAAW,QAAQ,QAAQ;gBAC5C,MAAM,OAAO,WAAW,QAAQ,IAAI;gBACpC,MAAM,OAAO,WAAW,QAAQ,IAAI;gBACpC,MAAM,OAAO,WAAW,QAAQ,IAAI;gBAEpC,IAAI,MAAM,QAAQ,MAAM,MAAM;gBAE9B,cAAc,CAAC,OAAS;2BACnB,KAAK,KAAK,CAAC,CAAC;wBACf;4BAAE;4BAAK;4BAAK;4BAAU;4BAAM;4BAAM;wBAAK;qBACxC;YACH,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;YACjD;QACF;QAEA,OAAO,IAAM,GAAG,KAAK;IACvB,GAAG,EAAE;IAEL,qBACE,qKAAC,gIAAA,CAAA,eAAY;QACX,QAAQ;YAAC;YAAS;SAAQ;QAC1B,MAAM;QACN,OAAO;YAAE,QAAQ;YAAS,OAAO;QAAO;;0BAExC,qKAAC,gIAAA,CAAA,YAAS;gBAAC,KAAI;;;;;;YAEd,WAAW,GAAG,CAAC,CAAC,MAAM,sBACrB,qKAAC,gIAAA,CAAA,SAAM,CAAC,GAAG;oBAET,SAAS;wBAAE,SAAS;4BAAC;4BAAG;4BAAG;yBAAE;wBAAE,OAAO;4BAAC;4BAAK;4BAAG;yBAAI;oBAAC;oBACpD,YAAY;wBAAE,UAAU;wBAAG,QAAQ;oBAAS;;sCAG5C,qKAAC,gIAAA,CAAA,eAAY;4BACX,QAAQ;gCAAC,KAAK,GAAG;gCAAE,KAAK,GAAG;6BAAC;4BAC5B,QAAQ,KAAK,IAAI,GAAG;4BACpB,OAAM;4BACN,aAAa;sCAEb,cAAA,qKAAC,gIAAA,CAAA,QAAK;;oCAAC;oCAAU,KAAK,IAAI;oCAAC;;;;;;;;;;;;sCAI7B,qKAAC,gIAAA,CAAA,eAAY;4BACX,QAAQ;gCAAC,KAAK,GAAG;gCAAE,KAAK,GAAG;6BAAC;4BAC5B,QAAQ,KAAK,QAAQ,GAAG;4BACxB,OAAM;4BACN,aAAa;sCAEb,cAAA,qKAAC,gIAAA,CAAA,QAAK;;oCAAC;oCAAc,KAAK,QAAQ;oCAAC;;;;;;;;;;;;sCAIrC,qKAAC,gIAAA,CAAA,eAAY;4BACX,QAAQ;gCAAC,KAAK,GAAG;gCAAE,KAAK,GAAG;6BAAC;4BAC5B,QAAQ,KAAK,IAAI,GAAG;4BACpB,OAAM;4BACN,aAAa;sCAEb,cAAA,qKAAC,gIAAA,CAAA,QAAK;;oCAAC;oCAAa,KAAK,IAAI;;;;;;;;;;;;sCAI/B,qKAAC,gIAAA,CAAA,eAAY;4BACX,QAAQ;gCAAC,KAAK,GAAG;gCAAE,KAAK,GAAG;6BAAC;4BAC5B,QAAQ,KAAK,IAAI,GAAG;4BACpB,OAAM;4BACN,aAAa;sCAEb,cAAA,qKAAC,gIAAA,CAAA,QAAK;;oCAAC;oCAAW,KAAK,IAAI;oCAAC;;;;;;;;;;;;;mBAzCzB;;;;;;;;;;;AA+Cf;uCAEe","debugId":null}}]
}