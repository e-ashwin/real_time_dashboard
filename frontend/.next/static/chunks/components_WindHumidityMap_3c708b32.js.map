{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://A%3A/IIST%20GEO%20INFORMATICS/2nd%20SEMESTER/IEEE%20GRSS/PS-4/proj1/frontend/components/WindHumidityMap.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { MapContainer, TileLayer, CircleMarker, Popup, useMap } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport { motion } from \"framer-motion\";\r\nimport * as d3 from \"d3-ease\";\r\n\r\n// Animate map movements\r\nconst MapAutoZoom = ({ data }) => {\r\n  const map = useMap();\r\n\r\n  useEffect(() => {\r\n    if (data.length > 0) {\r\n      const bounds = data.map((d) => [d.lat, d.lon]);\r\n      map.fitBounds(bounds, { padding: [50, 50], maxZoom: 8 });\r\n    }\r\n  }, [data, map]);\r\n\r\n  return null;\r\n};\r\n\r\nconst WindHumidityMap = () => {\r\n  const [sensorData, setSensorData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const ws = new WebSocket(\"ws://localhost:8000\");\r\n\r\n    ws.onmessage = (event) => {\r\n      try {\r\n        const newData = JSON.parse(event.data);\r\n\r\n        const lat = parseFloat(newData.lat);\r\n        const lon = parseFloat(newData.lon);\r\n        const humidity = parseFloat(newData.humidity);\r\n        const wind = parseFloat(newData.wind);\r\n        const pm25 = parseFloat(newData.pm25);\r\n        const temp = parseFloat(newData.temp);\r\n\r\n        if (isNaN(lat) || isNaN(lon)) return;\r\n\r\n        setSensorData((prev) => [\r\n          ...prev.slice(-100), // Keep last 100 data points\r\n          { lat, lon, humidity, wind, pm25, temp },\r\n        ]);\r\n      } catch (error) {\r\n        console.error(\"Error parsing WebSocket data:\", error);\r\n      }\r\n    };\r\n\r\n    return () => ws.close();\r\n  }, []);\r\n\r\n  return (\r\n    <MapContainer\r\n      center={[20.5937, 78.9629]} // India-centered\r\n      zoom={5}\r\n      style={{ height: \"100vh\", width: \"100%\" }}\r\n    >\r\n      <TileLayer url=\"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\" />\r\n\r\n      <MapAutoZoom data={sensorData} />\r\n\r\n      {sensorData.map((data, index) => (\r\n        <motion.div\r\n          key={index}\r\n          animate={{ scale: [0.5, 1, 0.5], opacity: [0.8, 1, 0.8] }} // Smooth transitions\r\n          transition={{ duration: 2, ease: d3.easeCubic, repeat: Infinity }}\r\n        >\r\n          {/* Wind Layer (Blue) */}\r\n          <CircleMarker\r\n            center={[data.lat, data.lon]}\r\n            radius={data.wind * 0.4}\r\n            color=\"blue\"\r\n            fillOpacity={0.6}\r\n            weight={1}\r\n          >\r\n            <Popup>üí® Wind: {data.wind} km/h</Popup>\r\n          </CircleMarker>\r\n\r\n          {/* Humidity Layer (Green) */}\r\n          <CircleMarker\r\n            center={[data.lat, data.lon]}\r\n            radius={data.humidity * 0.3}\r\n            color=\"green\"\r\n            fillOpacity={0.5}\r\n            weight={1}\r\n          >\r\n            <Popup>üíß Humidity: {data.humidity}%</Popup>\r\n          </CircleMarker>\r\n\r\n          {/* PM 2.5 Layer (Red) */}\r\n          <CircleMarker\r\n            center={[data.lat, data.lon]}\r\n            radius={data.pm25 * 0.2}\r\n            color=\"red\"\r\n            fillOpacity={0.4}\r\n            weight={1}\r\n          >\r\n            <Popup>üå´Ô∏è PM 2.5: {data.pm25}</Popup>\r\n          </CircleMarker>\r\n\r\n          {/* Temperature Layer (Orange) */}\r\n          <CircleMarker\r\n            center={[data.lat, data.lon]}\r\n            radius={data.temp * 0.3}\r\n            color=\"orange\"\r\n            fillOpacity={0.5}\r\n            weight={1}\r\n          >\r\n            <Popup>üå°Ô∏è Temp: {data.temp}¬∞C</Popup>\r\n          </CircleMarker>\r\n        </motion.div>\r\n      ))}\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default WindHumidityMap;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}